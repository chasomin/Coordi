<img src="https://github.com/chasomin/Coordi/assets/114223423/0ce875af-7330-40a9-878e-7443d1578769" width=100, height=100>

# â„ƒOORDI

í˜„ì¬ ê¸°ì˜¨ì— ë§ëŠ” ì˜· ìŠ¤íƒ€ì¼ì„ ê³µìœ í•˜ê³  ì•„ì´í…œì„ êµ¬ë§¤í•  ìˆ˜ ìˆëŠ” ì•±

### iOS 1ì¸ ê°œë°œ 
(ì„œë²„ ê°œë°œì í˜‘ì—…)


### **ê¸°ê°„**

24.04.12 ~ 24.05.05 (3ì£¼)

ì—…ë°ì´íŠ¸ ì§„í–‰ ì¤‘

### **ìµœì†Œë²„ì „**

iOS 16.0


### **ìŠ¤í¬ë¦°ìƒ·**

<img src="https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2Fcc0ffd51-4ef9-4d9a-93db-32e97a65a422%2F30cb5913-e1a2-4fe9-8023-5a54b4932fa9%2F%25E1%2584%2586%25E1%2585%25AE%25E1%2584%258C%25E1%2585%25A6_8.001.png?table=block&id=80909fbe-80b0-426c-b514-4cd35f13e810&spaceId=cc0ffd51-4ef9-4d9a-93db-32e97a65a422&width=2000&userId=b94327c2-0d8a-417c-b55a-6222a7f4ecb6&cache=v2" >
<img src="https://www.notion.so/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2Fcc0ffd51-4ef9-4d9a-93db-32e97a65a422%2F1c9c328f-f797-4452-b53e-b4c8c4f6af74%2F4.001.png?table=block&id=0c935845-f583-450b-a3ca-7e7bb01d6579&spaceId=cc0ffd51-4ef9-4d9a-93db-32e97a65a422&width=2000&userId=b94327c2-0d8a-417c-b55a-6222a7f4ecb6&cache=v2">
<br>

## ê¸°ëŠ¥ ì†Œê°œ

- íšŒì›ê°€ì… / ë¡œê·¸ì¸
- í˜„ì¬ ê¸°ì˜¨ì— ë§ëŠ” íŒ”ë¡œì‰ / ì „ì²´ ì‚¬ìš©ìì˜ ìŠ¤íƒ€ì¼ í”¼ë“œë¥¼ ì¶”ì²œ
- ë‚˜ì˜ ìŠ¤íƒ€ì¼ì„ í•´ë‹¹ ë‚ ì˜ ê¸°ì˜¨ê³¼ í•¨ê»˜ ê³µìœ 
- ë§ˆìŒì— ë“œëŠ” ì‚¬ìš©ì íŒ”ë¡œìš°
- ì½”ë”” ìŠ¤íƒ€ì¼ í”¼ë“œ ê¸°ë°˜ ê²€ìƒ‰ / ëŒ“ê¸€ / ì¢‹ì•„ìš” / êµ¬ë§¤ ê¸°ëŠ¥ êµ¬í˜„

## **ê¸°ìˆ **

`UIKit` `MVVM-C` `RxSwift` `DI` `WeatherKit` `CoreLocation` `Alamofire` `Codable` `Router` `URLRequestConvertible` `interceptor` `EventMonitor` `CodeBaseUI` `SnapKit` `CompositionalLayout` `DiffableDataSource` `UserDefaults` `Toast` `IQKeyboardManager` `Kingfisher` `Tabman`


## **ê¸°ìˆ  ê³ ë ¤ ì‚¬í•­**
 ë„¤ë¹„ê²Œì´ì…˜ ë¡œì§ì„ ë¶„ë¦¬í•˜ì—¬ ì½”ë“œì˜ ëª¨ë“ˆí™”ì™€ ìœ ì§€ë³´ìˆ˜ì„±ì„ ë†’ì´ê¸° ìœ„í•´ Coordinator íŒ¨í„´ ì ìš©
 
 ë°˜ì‘í˜• í”„ë¡œê·¸ë˜ë°ì„ í•˜ê¸° ìœ„í•´ RxSwif ì‚¬ìš©
 
 ê°ì²´ ê°„ì˜ ê²°í•©ë„ë¥¼ ë‚®ì¶”ê³  ìœ ì—°ì„±ì„ ë†’ì´ê¸° ìœ„í•´ Dependency Injection êµ¬í˜„

## **ê¸°ìˆ  ì„¤ëª…**

 **MVVM Input-Output íŒ¨í„´**ì„ ì‚¬ìš©í•œ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ë¶„ë¦¬ë¡œ ë°ì´í„°ì˜ íë¦„ ëª…í™•í™”

 **Coordinator** **íŒ¨í„´**ìœ¼ë¡œ ë„¤ë¹„ê²Œì´ì…˜ ë¡œì§ì„ ë¶„ë¦¬í•˜ì—¬ ë‹¨ì¼ ì±…ì„ ì›ì¹™ ì¤€ìˆ˜

 **Dependency Injection**ì„ í†µí•´ Testable í•œ ì½”ë“œ ì‘ì„±, ê° ì»´í¬ë„ŒíŠ¸ ê°„ì˜ ì˜ì¡´ì„± ê°ì†Œ

 **Final**Â í‚¤ì›Œë“œì™€Â **ì ‘ê·¼ì œì–´ì**ë¥¼ ì‚¬ìš©í•˜ì—¬ ì»´íŒŒì¼ ìµœì í™” ë‹¬ì„±í•˜ê¸° ìœ„í•´ ë…¸ë ¥

 protocol ìƒì„± ì‹œ **AnyObject** ì±„íƒì„ í†µí•´ í•´ë‹¹ protocolì„ ì±„íƒí•  ìˆ˜ ìˆëŠ” ê°ì²´ì˜ íƒ€ì…ì„ ì œí•œí•˜ì—¬ ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ë°©ì§€

 enum **NameSpace**ë¥¼ í†µí•´ literal ê°’ì„ ìº¡ìŠí™”í•˜ì—¬ ìœ ì§€ë³´ìˆ˜ì— ìš©ì´í•œ ì½”ë“œ êµ¬í˜„

 **weak self** í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ë°©ì§€

 **StatusCode** ê´€ë¦¬ë¡œ ì—ëŸ¬ ìƒí™© ë³„ ë‹¤ë¥¸ ì—ëŸ¬ ì²˜ë¦¬

 **PropertyWrapper**ë¥¼ ì‚¬ìš©í•˜ì—¬ ë°˜ë³µë˜ëŠ” ì½”ë“œ ê°œì„ 

 **URLRequestConvertible** protocolì„ ì±„íƒí•œ **Router**ë¥¼ êµ¬í˜„í•˜ì—¬ API ìš”ì²­ ë¡œì§ì„ ìº¡ìŠí™”

 Alamofire **interceptor**ë¥¼ í†µí•´ í† í° ê°±ì‹  ìë™í™”

 **PG** ì—°ë™ì„ í†µí•œ ìƒí’ˆ ì¹´ë“œê²°ì œ ì§€ì› ë° ì˜ìˆ˜ì¦ ê²€ì¦ ë¡œì§ êµ¬í˜„

 **BaseView**ë¥¼ í†µí•´ ì¼ê´€ëœ ViewController êµ¬ì¡° í˜•ì„±

 **Compositional Layout**ì„ í†µí•´ Section ë³„ ë‹¤ì–‘í•œ Cellì„ êµ¬ì„±

 **DiffableDataSource**ë¥¼ ì‚¬ìš©í•˜ì—¬ snapshotì„ ê´€ë¦¬í•˜ê³  ì´ë¥¼ í†µí•´ íš¨ìœ¨ì ì¸ ë·° êµ¬ì„±



 

 




## íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

1ï¸âƒ£Â ì´ë¯¸ì§€ë¡œ ì¸í•œ ë©”ëª¨ë¦¬ ë¶€ì¡±ìœ¼ë¡œ ì•±ì´ ê°•ì œ ì¢…ë£Œë˜ëŠ” ë¬¸ì œ

widthë¥¼ ë°›ì•„ ë¹„ìœ¨ë¡œ ì´ë¯¸ì§€ë¥¼ resizeí•˜ëŠ” ë©”ì„œë“œë¥¼ êµ¬í˜„í•˜ê³ , kingfisherë¡œ setImageë¥¼ í•  ë•Œ, resize ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ì—¬ ë©”ëª¨ë¦¬ ë¬¸ì œë¥¼ í•´ê²°

```swift
extension UIImage {
    func resize(newWidth: CGFloat) -> UIImage {
        let scale = newWidth / self.size.width
        let newHeight = self.size.height * scale

        let size = CGSize(width: newWidth, height: newHeight)
        let render = UIGraphicsImageRenderer(size: size)
        let renderImage = render.image { context in
            self.draw(in: CGRect(origin: .zero, size: size))
        }
        return renderImage
    }
}
extension UIImageView {
    func loadImage(from path: String, placeHolderImage: UIImage? = nil) {
        guard let url = URL(string: BaseURL.baseURL.rawValue + BaseURL.version.rawValue + "/" + path) else { return }
        let modifier = AnyModifier { request in
            var request = request
            request.setValue(UserDefaultsManager.accessToken, forHTTPHeaderField: HTTPHeader.authorization.rawValue)
            request.setValue(APIKey.key.rawValue, forHTTPHeaderField: HTTPHeader.sesacKey.rawValue)
            return request
        }
        self.kf.setImage(with: url, placeholder: placeHolderImage, options: [.requestModifier(modifier)]) { result in
            switch result {
            case .success(let imageResult):
                let resizedImage = imageResult.image.resize(newWidth: 150)
                self.image = resizedImage
                self.isHidden = false
            case .failure(_):
                self.image = UIImage.emptyProfile
                self.isHidden = false
            }
        }
    }
}
```
<img src="https://github.com/chasomin/Coordi/assets/114223423/6cd13ae9-57f2-4d69-a808-dc404c1f1313" >


<br>
<br>
<br>


2ï¸âƒ£ EventMonitorë¥¼ ì‚¬ìš©í•œ ë””ë²„ê¹…

EventMonitor protocolì„ ì‚¬ìš©í•˜ì—¬ ë„¤íŠ¸ì›Œí¬ í†µì‹  ìƒíƒœë¥¼ í™•ì¸ (ìš”ì²­ URL, Method, Body, Header, ìƒíƒœì½”ë“œ ë“±) â†’ ë¬¸ì œì ì„ ë¹ ë¥´ê²Œ íŒŒì•…í•˜ê³  í•´ê²°

```swift
final class APIMonitor: EventMonitor {
    
    static let shared = APIMonitor()
    private init() { }
    
    // ìš”ì²­ ì‹œì‘
    func requestDidResume(_ request: Request) {
        guard let request = request.request?.urlRequest else { return }
        var body: String = "body ì—†ìŒ"
        if let httpBody = request.httpBody {
            body = toPrettyJsonString(data: httpBody)
        }
        
        let message =  """
âœ… ìš”ì²­ì‹œì‘

[ğŸ“ìš”ì²­ URL]
\(request.url?.absoluteString ?? "URL í™•ì¸ ë¶ˆê°€")

[ğŸ“ìš”ì²­ ë©”ì„œë“œ]
\(request.method?.rawValue ?? "HTTP ë©”ì„œë“œ í™•ì¸ ë¶ˆê°€")

[ğŸ“ìš”ì²­ í—¤ë”]
\(request.headers.dictionary.description)

[ğŸ“ìš”ì²­ ë°”ë””]
\(body)

---
"""
        print(message)
    }
...
```
```swift
final class API {
    static let session: Session = {
        let configuration = URLSessionConfiguration.af.default
        let apiLogger = APIMonitor.shared
        return Session(configuration: configuration, eventMonitors: [apiLogger])
    }()
}
```
